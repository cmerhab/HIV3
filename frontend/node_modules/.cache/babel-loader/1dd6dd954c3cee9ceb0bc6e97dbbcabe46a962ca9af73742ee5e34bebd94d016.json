{"ast":null,"code":"var _jsxFileName = \"/Users/cmerhab/Desktop/React/Hiv3/frontend/src/components/demoteadmin.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport ReactSearchBox from \"react-search-box\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst DemoteAdmin = () => {\n  _s();\n  const [admindata, setAdminData] = useState([]);\n  const [adminbutton, setAdminButton] = useState(false);\n  const [adminselect, setAdminSelect] = useState();\n  const fetchAdminEmails = async () => {\n    try {\n      const response = await fetch('https://hiv3-app-1abe045e0a88.herokuapp.com/fetchrole?roleName=Admin');\n      const [adminRole] = await response.json();\n      if (adminRole) {\n        let adminEmails = [];\n        adminRole.Roles.forEach(member => {\n          for (let i = 0; i < member.Emails.length; i++) {\n            const email = member.Emails[i];\n            const userid = member.Userid[i];\n            adminEmails.push({\n              key: userid,\n              value: email\n            });\n          }\n        });\n        setAdminData(adminEmails);\n      }\n    } catch (error) {\n      console.error('Failed to fetch admin list', error);\n    }\n  };\n  const handleSelect = record => {\n    setAdminSelect(record);\n    setAdminButton(true);\n  };\n  const handleAdminUser = async flag => {\n    if (!adminselect) return;\n    const userId = adminselect.item.key;\n    const userEmail = adminselect.item.value;\n    if (flag === 1) {\n      try {\n        const response = await fetch('https://hiv3-app-1abe045e0a88.herokuapp.com/banadmin', {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId,\n            userEmail\n          })\n        });\n        const data = await response.json();\n        console.log(data.message);\n      } catch (error) {\n        console.error('Failed to ban admin', error);\n      }\n    } else if (flag === 0) {\n      try {\n        const response = await fetch('https://hiv3-app-1abe045e0a88.herokuapp.com/demoteadmin', {\n          method: 'PATCH',\n          headers: {\n            'Content-Type': 'application/json'\n          },\n          body: JSON.stringify({\n            userId,\n            userEmail\n          })\n        });\n        const data = await response.json();\n        console.log(data.message);\n      } catch (error) {\n        console.error('Failed to demote admin', error);\n      }\n    }\n    setAdminButton(false);\n  };\n  useEffect(() => {\n    fetchAdminEmails();\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Admin Users\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ReactSearchBox, {\n      placeholder: \"Demote User\",\n      value: \"Doe\",\n      data: admindata,\n      onSelect: handleSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 13\n    }, this), adminselect && adminbutton && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Admin to Guest\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAdminUser(0),\n          children: \"Demote User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAdminButton(false),\n          children: \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Admin to Banned\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAdminUser(1),\n          children: \"Ban User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setAdminButton(false),\n          children: \"No\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 87,\n    columnNumber: 9\n  }, this);\n};\n_s(DemoteAdmin, \"SB5zk+bwv6X++KcJHw2e5nNnHdw=\");\n_c = DemoteAdmin;\nexport default DemoteAdmin;\nvar _c;\n$RefreshReg$(_c, \"DemoteAdmin\");","map":{"version":3,"names":["React","useState","useEffect","ReactSearchBox","jsxDEV","_jsxDEV","DemoteAdmin","_s","admindata","setAdminData","adminbutton","setAdminButton","adminselect","setAdminSelect","fetchAdminEmails","response","fetch","adminRole","json","adminEmails","Roles","forEach","member","i","Emails","length","email","userid","Userid","push","key","value","error","console","handleSelect","record","handleAdminUser","flag","userId","item","userEmail","method","headers","body","JSON","stringify","data","log","message","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","onSelect","onClick","_c","$RefreshReg$"],"sources":["/Users/cmerhab/Desktop/React/Hiv3/frontend/src/components/demoteadmin.js"],"sourcesContent":["import React, {useState, useEffect} from 'react'\nimport ReactSearchBox from \"react-search-box\";\nconst DemoteAdmin = () => {\n    const [admindata, setAdminData] = useState([]);\n    const [adminbutton, setAdminButton] = useState(false);\n    const [adminselect, setAdminSelect] = useState();\n\n    const fetchAdminEmails = async () => {\n        try {\n            const response = await fetch('https://hiv3-app-1abe045e0a88.herokuapp.com/fetchrole?roleName=Admin');\n            const [adminRole] = await response.json();\n\n            if(adminRole)\n            {\n                let adminEmails =[];\n                adminRole.Roles.forEach(member => {\n                    for(let i = 0; i< member.Emails.length; i++) {\n                        const email = member.Emails[i];\n                        const userid = member.Userid[i]; \n                        adminEmails.push ({\n                            key: userid,\n                            value: email,\n                        });\n                    }\n                });\n                setAdminData(adminEmails);\n            }\n        } catch (error) {\n            console.error('Failed to fetch admin list', error);\n        }\n    };\n\n    const handleSelect = (record) => {\n        setAdminSelect(record);\n        setAdminButton(true);\n    }\n\n    const handleAdminUser = async (flag) => {\n        if(!adminselect)\n            return;\n        const userId = adminselect.item.key;\n        const userEmail = adminselect.item.value;\n            if(flag===1)\n            {\n                try {\n                    const response = await fetch('https://hiv3-app-1abe045e0a88.herokuapp.com/banadmin', {\n                        method: 'PATCH',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({ userId, userEmail }),\n                    });\n        \n                    const data = await response.json();\n                    console.log(data.message);\n        \n                } catch (error) {\n                    console.error('Failed to ban admin', error);\n                }\n            }\n            else if(flag === 0 )\n            {\n                try {\n                    const response = await fetch('https://hiv3-app-1abe045e0a88.herokuapp.com/demoteadmin', {\n                        method: 'PATCH',\n                        headers: {\n                            'Content-Type': 'application/json',\n                        },\n                        body: JSON.stringify({ userId, userEmail }),\n                    });\n        \n                    const data = await response.json();\n                    console.log(data.message);\n        \n                } catch (error) {\n                    console.error('Failed to demote admin', error);\n                }\n            }\n           \n        setAdminButton(false);\n    }\n\n    useEffect(() => {\n        fetchAdminEmails();\n    })\n    return (\n        <div>\n            <br />\n            <p>Admin Users</p>\n            <ReactSearchBox\n                placeholder='Demote User'\n                value = \"Doe\"\n                data = {admindata}\n                onSelect = {handleSelect}\n\n            />\n             {adminselect && adminbutton && (\n                <div>\n                    <div>\n                        <p>Admin to Guest</p>\n                        <button onClick={()=>handleAdminUser(0)}>Demote User</button>\n                        <button onClick={()=>setAdminButton(false)}>No</button>\n                    </div>\n                    <div>\n                        <p>Admin to Banned</p>\n                        <button onClick={()=>handleAdminUser(1)}>Ban User</button>\n                        <button onClick={()=>setAdminButton(false)}>No</button>\n                    </div>\n\n                 </div>\n             )}\n        </div>\n    )\n};\nexport default DemoteAdmin;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}